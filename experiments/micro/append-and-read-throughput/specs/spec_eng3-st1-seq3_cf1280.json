{
    "exp_variables" : {
        "BENCHMARK_TYPE": "append-read-throughput",
        "DURATION": "20",
        "RECORD_LENGTH": "1024",
        "NUM_ENGINES": "3",
        "RELATIVE_EXP_DIR": "eng1-st1-seq3/cf1280",
        "CONCURRENCY": "1280"
    },
    "services": {
        "zookeeper": { "placement": "bokiexp-gateway" },
        "zookeeper-setup": { "placement": "bokiexp-gateway" },
        "boki-controller": { "placement": "bokiexp-gateway" },
        "boki-gateway": { "placement": "bokiexp-gateway" },
        "boki-storage": { "placement_label": "storage_node", "replicas": 1 },
        "boki-sequencer": { "placement_label": "sequencer_node", "replicas": 3 },
        "boki-engine": { "placement_label": "engine_node", "replicas": 3 }
    },
    "docker" : {
        "services" : [
            {
                "service_name": "boki-controller",
                "docker": {
                    "image": "zjia/boki:sosp-ae",
                    "entrypoint" : ["/boki/controller", "--zookeeper_host=zookeeper:2181", "--metalog_replicas=3", "--userlog_replicas=1", "--index_replicas=3", "--v=1"],
                    "depends_on": ["zookeeper-setup"]
                } 
            }
        ]
    },
    "applications" : [
        {
            "functions": [
                {
                    "function_name": "AppendAndReadLoopAsync",
                    "service_name": "append-read-service",
                    "docker": {
                        "image": "maxwie/boki-microbench:latest",
                        "entrypoint" : ["/tmp/boki/run_launcher", "/microbench-bin/main"],
                        "volumes": ["/mnt/inmem/boki:/tmp/boki"],
                        "environment": ["FAAS_GO_MAX_PROC_FACTOR=8", "GOGC=1000"],
                        "depends_on": ["boki-engine"]
                    },
                    "min_workers": 1280,
                    "max_workers": 1280,
                    "replicas": 1,
                    "placement_label": "engine_node"
                }
            ],
            "instances" : 1
        }, 
        {
            "functions": [
                {
                    "function_name": "MergeResults",
                    "service_name": "merge-service",
                    "docker": {
                        "image": "maxwie/boki-microbench:latest",
                        "entrypoint" : ["/tmp/boki/run_launcher", "/microbench-bin/main"],
                        "volumes": ["/mnt/inmem/boki:/tmp/boki"],
                        "environment": ["FAAS_GO_MAX_PROC_FACTOR=8", "GOGC=1000"],
                        "depends_on": ["boki-engine"]
                    },
                    "min_workers": 1,
                    "max_workers": 1,
                    "replicas": 1,
                    "placement_label": "engine_node"
                }
            ],
            "instances" : 1
        }
    ]
}